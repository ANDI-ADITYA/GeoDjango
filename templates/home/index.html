{% extends "home/base.html" %}
{% load leaflet_tags %}

{% block Title %}
	WebGis Geofisika
{% endblock Title %}

{% block Heading %}

{% endblock Heading %}

{% block Contents %}
	<script> 
		function map_layers(map,option){
			var street = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
				attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
				maxZoom: 20,
				id: 'mapbox/streets-v11',
				tileSize: 512,
				zoomOffset: -1,
				accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw'
			});
			street.addTo(map);
			var satellite = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
				attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
				maxZoom: 20,
				id: 'mapbox/satellite-streets-v11',
				tileSize: 512,
				zoomOffset: -1,
				accessToken: 'pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NDg1bDA1cjYzM280NHJ5NzlvNDMifQ.d6e-nNyBDtmQCVwVNivz7A'
			});
			var Point = new L.GeoJSON.AJAX("{% url 'maps:data_point' %}",{
				onEachFeature: function(feature, layer){
					if (feature.properties && feature.properties.name.toString()){
						layer.bindPopup(feature.properties.name.toString());
					}
				},
			});
			
			var Poly = new L.GeoJSON.AJAX("{% url 'maps:data_poly' %}",{
				onEachFeature: function(feature, layer){
					if (feature.properties && feature.properties.title.toString()){
						layer.bindPopup(feature.properties.title.toString());
					}
				},
			});
			
			var Street = new L.GeoJSON.AJAX("{% url 'maps:data_street' %}",{
				onEachFeature: function(feature, layer){
					if (feature.properties && feature.properties.name.toString()){
						layer.bindPopup(feature.properties.name.toString());
					}
				},
			});
			
			var baseLayers = {
				"Streets": street,
				"Satellite": satellite
			}
			var overlayMaps = {
				"Layers": {
					"Building": Point,
					"Streets": Street,
					"Polygon": Poly
				}
			};
			L.control.groupedLayers(baseLayers, overlayMaps).addTo(map);
		}
	</script>
	{% leaflet_map "gis" callback="window.map_layers" %}
{% endblock Contents %}


